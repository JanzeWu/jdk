
# 共享锁和独占锁
锁的状态state

## 共享锁
可重入锁，锁的状态是一个计数器，使用CAS（compare and swap）原子操作递减计数器，多个线程可以重入。

## 独占锁
只允许单个线程获取锁，有公平锁 和 非公平锁 两种。

锁的状态只有两种0 和 1，0表示没有线程占用锁，1表示锁被线程占用。

1. 非公平锁，一旦线程获取锁，则该线程执行。

2. 公平锁，获取锁前先检查是否线程等待队列中的第一个线程，如果是则获取锁成功。


